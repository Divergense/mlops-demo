schema: '2.0'
stages:
  drop_columns:
    cmd: python -m src.data.drop_columns data/raw/googleplaystore.csv data/interim/cleaned.csv
    deps:
    - path: data/raw/googleplaystore.csv
      md5: 11dd3f23ab726058adad4a8e261d10e9
      size: 1360155
    - path: src/data/drop_columns.py
      md5: 439fede69d8079654750bc5954ab0992
      size: 921
    params:
      params.json:
        UNNECESSARY_COLUMNS:
        - Last Updated
        - Current Ver
        - Android Ver
        - App
    outs:
    - path: data/interim/cleaned.csv
      md5: 02239ab226ee925e7e44ffad6f209731
      size: 695730
  split_data:
    cmd: python -m src.data.split data/interim/cleaned.csv data/interim/interim_train.csv
      data/interim/interim_test.csv
    deps:
    - path: data/interim/cleaned.csv
      md5: 02239ab226ee925e7e44ffad6f209731
      size: 695730
    - path: src/data/split.py
      md5: add07ff451d554f1846196df171e75cc
      size: 1018
    params:
      params.json:
        RANDOM_STATE: 12345
    outs:
    - path: data/interim/interim_test.csv
      md5: 2a641f8b1bab75135403295d7063dd37
      size: 557985
    - path: data/interim/interim_train.csv
      md5: e7b562abaa9469220c78da5e051c9870
      size: 137817
  clean_features_train:
    cmd: python -m src.features.clean_features data/interim/interim_train.csv data/processed/processed_train.csv
    deps:
    - path: data/interim/interim_train.csv
      md5: e7b562abaa9469220c78da5e051c9870
      size: 137817
    - path: src/features/clean_features.py
      md5: 024e35298683eab203e6d4ab97a25707
      size: 1987
    params:
      params.json:
        MEDIAN_SIZE: 11500000
        RANDOM_STATE: 12345
    outs:
    - path: data/processed/processed_train.csv
      md5: 260762b260e7f3489c3e18c2ad499d47
      size: 81243
  clean_features_test:
    cmd: python -m src.features.clean_features data/interim/interim_test.csv data/processed/processed_test.csv
    deps:
    - path: data/interim/interim_test.csv
      md5: 2a641f8b1bab75135403295d7063dd37
      size: 557985
    - path: src/features/clean_features.py
      md5: 024e35298683eab203e6d4ab97a25707
      size: 1987
    params:
      params.json:
        MEDIAN_SIZE: 11500000
    outs:
    - path: data/processed/processed_test.csv
      md5: c84d901cbd9e71e87b9589b776f7e192
      size: 323654
  train:
    cmd: python -m src.models.train_model data/processed/processed_train.csv models/rforest.pkl
    deps:
    - path: data/processed/processed_train.csv
      md5: 260762b260e7f3489c3e18c2ad499d47
      size: 81243
    - path: src/models/train_model.py
      md5: 399aa6ea8d8c0acf3d9f3c72d9bd0201
      size: 2686
    params:
      params.json:
        ARTIFACT_PATH: model
        MEDIAN_SIZE: 11500000
        MODEL_EXTENSION: .pkl
        MODEL_NAME: Random Forest Regressor
        RANDOM_STATE: 12345
        Y_COLUMN: Rating
    outs:
    - path: models/rforest.pkl
      md5: 968dfff03541c269672bbefe7cbe6244
      size: 12411992
  predict_test_data:
    cmd: python -m src.models.evaluate_model models/rforest.pkl data/processed/processed_test.csv
      reports/metrics.json
    deps:
    - path: data/processed/processed_test.csv
      md5: c84d901cbd9e71e87b9589b776f7e192
      size: 323654
    - path: models/rforest.pkl
      md5: 968dfff03541c269672bbefe7cbe6244
      size: 12411992
    - path: src/models/evaluate_model.py
      md5: e962a0c689f7cfd678510c5adb0b4bea
      size: 2400
    params:
      params.json:
        MODEL_NAME: Random Forest Regressor
        REPORT_PATH: reports/figures/
        Y_COLUMN: Rating
    outs:
    - path: reports/metrics.json
      md5: 2fda8b14b60f7530a07f141e53bb8eaa
      size: 141
